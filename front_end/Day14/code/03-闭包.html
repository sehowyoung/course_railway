<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // 局部变量在作用域嵌套时的特殊表现; 
        // 闭包的前置学习 : 
        // 1. 全局变量，局部变量; 
        // let a = 10;

        // function foo(){
        //     let a = 10;
        // }
        // foo();
        // 生命周期 : 
        // - 全局变量 : 永久; 
        // - 局部变量 : 应用; 

        // 2. 代码执行机制 : 
        // javascript 代码在执行的时候解释器会为代码创建一个执行环境; 
        // 每次代码执行时都会创建一个对象用于存储代码执行时需要用的变量, 这个对象在代码执行结束之后会被删除; 
        //  - 这样临时存储数据对象被我们称之为 活动对象( AO )

        // 2.1 有一个特殊的情况存储数据的变量不会被删除，这对象叫window对象! 
        // - window对象是永久存在; 
        // - 全局变量是放在window对象上的; 
        // - 所以全局变量的生命周期是永久的; 

        // 2.2 函数执行的时候创建的AO; 
        // - 看不见摸不着; 
        // - 我们通过概念去理解; 

        // function foo(){
        //     let a = 10;
        // }
        // foo();
        // 代码执行时， 会在内存之中创建一个执行环境 ; 
        // 这个执行环境之中会存在一个专门存储变量的活动对象 AO; 
        // 我们会把所有的变量都放入到AO之中; 

        // 3. 垃圾回收机制 ; 
        // - 在内存之中被判定为垃圾的变量将会被立即删除; 
        // - 在函数执行结束之后， 垃圾回收机制就会工作并判断活动对象里面的变量是否是垃圾，如果是就立即删除，如果不是就不会被删除; 

        // - 怎样让垃圾回收机制认为我们的局部变量还有用 ? 
        //  - 实现的方案 : 闭包! 
        // - 核心就是描述这个变量后面还会被使用! 

        // 代码方案 : 
        // - 函数套函数, 内部引外部! 

        // function outerFn(){
        //     let a = 10;
        //     function innerFn(){
        //         console.log( a );
        //     }
        //     // 把内部函数返回出去; 
        //     return innerFn;
        // }
        // let inner = outerFn();

        // inner();
        // inner();

        // 每次函数执行都会创建一个独立的AO存储变量数据; 

        // function outerFn(){
        //     let a = 10;
        //     function innerFn(){
        //         a ++;
        //         console.log( a );
        //     }
        //     // 把内部函数返回出去; 
        //     return innerFn;
        // }
        // let inner = outerFn();
        // inner();
        // inner();
        // let inner2 = outerFn();
        // inner2();
        // inner2();

        

    </script>
</body>
</html>