<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
	<title></title>
	<style>
		* {
			padding: 0;
			margin: 0;
		}

		body {
			height: 100%;
		}

		#wrap{
			overflow: hidden;
			position: relative;
		}
		div.wrap {
			width: 1100px;
			margin: 0 auto;
			background: #DDD;
			
		}
		div.wrap::after{
			content: "";
			display: block;
			clear: both;
		}

		div.wrap div {
			width: 250px;
			margin-left: 33px;
			border: 1px solid #000;
			float: left;
			box-sizing: border-box;
		}

		div.wrap div:nth-child(1){
			margin-left: 0;
		}

		div.wrap div img {
			width: 220px;
		}
	</style>
	
</head>

<body>
	<div class="wrap" id="wrap">
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/1.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/2.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/3.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/4.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/5.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/6.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/7.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/8.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/9.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/10.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/11.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/12.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/13.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/14.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/15.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/16.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/17.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/18.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/19.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/20.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/21.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/22.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/23.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/24.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/25.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/26.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/27.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/28.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/29.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/30.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/31.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/32.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/33.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/34.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/35.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/36.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/37.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/38.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/39.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/40.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/41.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/42.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/43.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/44.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/45.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/46.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/47.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/48.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/49.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/50.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流</span>
		</div>
		<div>
			<h3>瀑布流</h3>
			<a href="javascript:void(0)" title=""><img src="waterfall/51.jpg" alt="" title="" /></a>
			<p>瀑布流瀑布流瀑布流瀑布流</p>
			<span>瀑布流瀑布流瀑布流</span>
		</div>
	</div>
	<div class="loading">等待动画...</div>
</body>

	<script>
		// 瀑布流排版思路 : 
		// 1. 知道当前元素的高度是多少 : offsetHeight 
		// 2. 把元素分成 n 列 : 
		//   - 我们是用数组进行分列的; 
		//   [ 第0列的总高度 , 第1列的总高度 , 第2列的总高度 ];
		
		//   - 创建数组的时候需要一个初始的高度, 第一行的元素的高度; 
		//   - 其余的元素是我们要排列的元素; 

		// 选择元素并分类 : 

		let boxs = document.querySelectorAll("#wrap div");
		let wrap = document.getElementById("wrap");
		let column_count = 4;
		let column_array = [];
		
		function init(){
			for(let i = 0 ; i < boxs.length ; i ++){
				// 如果是第一排的元素，那么就让这个元素创建数组的初始值; 
				if( i < column_count ){
					column_array.push( boxs[i].offsetHeight ); 
				}else{
					// 剩余的需要排列的元素; 
					sortBox( boxs[i] );
				}
			}
			// 让容器的高度和当前的瀑布流齐平; 
			wrap.style.height = Math.min( ...column_array ) + "px";
		}
		function sortBox( ele ){
			// 定位元素需要什么数据 ? 
			// - left , top 

			let min = Math.min( ...column_array );
			// 找到当前最小值在数组之中的下标; 
			let index = column_array.indexOf( min )

			min += 20;
			// 设置元素的位置; 
			ele.style.left = boxs[index].offsetLeft + "px"
			ele.style.top  = min + "px";
			ele.style.position = "absolute";
			ele.style.marginLeft = 0;

			// 给数组的对应位置加上当前元素的高度; 
			column_array[index] += ele.offsetHeight + 20 ; 
		}

		init()
	</script>

</html>